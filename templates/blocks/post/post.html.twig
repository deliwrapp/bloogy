{#
// Variables
- blockClass : Custom Class
- color : Custom color class
- post.content : Post Content
- post.title : Post title
- post.createdAt : Creation Date of the post
- post.category : Post category
- post.author : Post author
- post.link : Post link CTA,
- post.linkText: Post link CTA text
- post.img: Post Image
#}


{% if blockContainer is defined and blockContainer is not null %}
    {% if blockContainer.name is defined and blockContainer.name is not null %}
        {% set name = blockContainer.name %}
    {% endif %}
    {% if blockContainer.content is defined and blockContainer.content is not null %}
        {% set content = blockContainer.content %}
    {% endif %}
    {% if blockContainer.data is defined and blockContainer.data is not null %}
        {% set post = blockContainer.data %}
    {% endif %}
    {% if blockContainer.formModel is defined and blockContainer.formModel is not null %}
        {% set formModel = blockContainer.data %}
    {% endif %}
    {% if blockContainer.options is defined and blockContainer.options is not null %}
        {% set options = blockContainer.options %}
    {% endif %}
    {% if blockContainer.media is defined and blockContainer.media is not null %}
        {% set img = blockContainer.media %}
    {% endif %}
{% endif %}

{% if color is not defined %}  
        {% set color = '-tertiary' %}
{% endif %}
{% if blockClass is not defined %}  
        {% set blockClass = '' %}
{% endif %}

<section style="min-height: 3rem"; class="oldway-post {{blockClass}}">
    {% if post is defined %}
        <article class="post">
                <div>
                    {% if img is defined and img is not null %}
                        {% set mediaImgList = ['png', 'jpg', 'jpeg', 'gif', 'bmp'] %}
                        {% if img.ext in mediaImgList %}
                            {% set mediaPath = img.private ? path('serve_private_file', {'filename': img.originalFilename}) : asset(img.filePath) %}
                            <div class="absolute-bg" style="background-image: url({{mediaPath}});"></div>
                        {% else %}
                            <div class="absolute-bg file-icon file-icon-xl -m2" data-type="{{img.ext}}"></div>
                        {% endif %}
                    {% endif %}
                </div>
            <div class="post__container">
                {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_EDITOR') %}
                    <button style="margin-top:-0rem;" class="tooltip -tooltip-top -light btn btn-action s-circle -hover -shad-12 -shad-14-h -z100 -relative -top -left" data-tooltip="edit post" type="submit">   
                        <a class="-light" target="_blank" href="{{ path('editor_post_edit', { 'id': post.id }) }}">
                            <i class="fa-solid fa-pen"></i>        
                        </a>
                    </button>
                {% endif %}   
               {#  {% if post.category is defined and post.category is not null %}  
                        <span class="post__category">{{post.category}}</span>
                {% endif %} #}
                {% if post.author is defined and post.author is not null %}  
                        <span class="post__category">by {{post.author.username}}</span>
                {% endif %}
                
                <div class="post__content">
                    <header>
                        {% if post.createdAt is defined and post.createdAt is not null %}  
                            <time class="post__time">{{post.createdAt|date("d/m/Y")}}</time>
                        {% endif %}
                        {% if post.title is defined and post.title is not null %}
                            <h1 class="post__header"><span>{{post.title}}</h1>
                        {% endif %}
                    </header>
                    {% if post.content is defined and post.content is not null %}
                        <p class="post__text">{{post.content| raw }}</p>
                    {% endif %}
                </div>
                {% if post.link is defined and post.link is not null %}
                    <div class="post__link">
                        <a href="{{post.link}}">
                            {% if post.linkText is defined and post.linkText is not null %}
                                {{post.linkText}}
                            {% else %}
                                more...
                            {% endif %}
                        </a>
                    </div>
                {% endif %}
            </div>
        </article>
    {% endif %}
</section>