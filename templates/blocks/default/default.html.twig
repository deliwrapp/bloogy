{#
// Variables
- content : Content
- data : Data
- formModel : FormModel
#}

<section style="min-height: 3rem";>
    {% if content is defined and content is not null %}
        {{content|raw}}
    {% endif %}
    {% if data is defined and data is not null %}  
            <pre>
                <code>
                    {{dump(data)}}
                </code>
            </pre>
    {% endif %}
    {% if media is defined and media is not null %}
        <section class="-w-f">   
            <div class="card -shad-4 -shad-12-h">
                {% set file = media %}
                {% set mediaImgList = ['png', 'jpg', 'jpeg', 'gif', 'bmp'] %}
                <div class="-card-image -flex -justify-space-evenly -items-center">
                    {% if file.ext in mediaImgList %}
                        {% set mediaPath = file.private ? path('serve_private_file', {'filename': file.originalFilename}) : asset(file.filePath) %}
                        <img class="img-responsive" src="{{mediaPath}}" alt="{{file.name}}"> 
                    {% else %}
                        <div class="file-icon file-icon-xl -m2" data-type="{{file.ext}}"></div>
                    {% endif %}
                    </div>
                <div class="-card-header -pl3 -flex -flex-column -justify-space-evenly -items-center -wrap ">
                    <a
                        target="_blank"
                        href="{{file.private ? path('serve_private_file', {'filename': file.originalFilename}) : asset(file.filePath)}}"
                        class="-m0 -t-bld -t-tiny"
                    >
                        {{ file.name ~ '.' ~ file.ext}}  
                    </a>
                    <div class="-subtitle text-gray -m0 -t-i -t-tiny">
                        {{ file.private ? 'private':'public' }}
                    </div>
                </div>
                <div class="-card-footer">
                    <div class="-flex -justify-space-evenly -items-center -wrap -shad-12 -pr2 -pl2 -w-f">
                        {% if file.roleAccess is defined and file.roleAccess is not null %}
                            {% if is_granted('ROLE_ADMIN') or is_granted(file.roleAccess) %}
                                {% include 'liquid-ui/components/ui/buttons/btn-action.html.twig' with {
                                    'path': file.private ? path('download_private_file', {'filename': file.originalFilename}) : asset(file.filePath),
                                    'action': 'download',
                                    'tooltip': 'download file',
                                    'icon': 'fas fa-download'
                                } %}
                            {% endif %}
                        {% else %}
                            {% include 'liquid-ui/components/ui/buttons/btn-action.html.twig' with {
                                'path': file.private ? path('download_private_file', {'filename': file.originalFilename}) : asset(file.filePath),
                                'action': 'download',
                                'tooltip': 'download file',
                                'icon': 'fas fa-download'
                            } %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>
    {% endif %}

    {% if formModel is defined and formModel is not null %}
        {% if formModel.formTemplate is defined and formModel.formTemplate is not null %}
            {% include formModel.formTemplate.templatePath with {formModel: formModel} %}
        {% endif %}
    {% endif %}
    
</section>
